!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.BBAuthClient=n():e.BBAuthClient=n()}(window,(function(){return function(e){var n={};function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(o,i,function(n){return e[n]}.bind(null,i));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=9)}([function(e,n,t){"use strict";function o(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0}),o(t(6)),o(t(7))},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t(0),i="https://signin.blackbaud.com/signin/",r=encodeURIComponent;function a(e){var n=i+"?redirectUrl="+r(location.href);return e&&(n+="&inactivity=1"),n}var s=function(){function e(){}return e.navigate=function(e,n){n?location.replace(e):location.href=e},e.redirectToSignin=function(e){var n=a();e&&(n+="&"+function(e){var n=[];for(var t in e)e.hasOwnProperty(t)&&n.push(r(t)+"="+r(e[t]));return n.join("&")}(e)),this.navigate(n)},e.redirectToSignoutForInactivity=function(){var e=a(!0),n=i+"sign-out?redirectUrl="+r(e);this.navigate(n)},e.redirectToError=function(e){var n,t;switch(e){case o.BBAuthTokenErrorCode.InvalidEnvironment:t="invalid_env",n="security";break;default:n="broken"}var i="https://host.nxt.blackbaud.com/errors/"+n+"?source=auth-client&url="+r(location.href);t&&(i+="&code="+r(t)),this.navigate(i)},e}();n.BBAuthNavigator=s},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o={"bryonwilkins.com":"https://sts.bryonwilkins.com"},i=function(){function e(){}return e.getSTSDomain=function(e){return void 0===e&&(e=window.location.hostname),e in o?o[e]:"https://s21aidntoken00blkbapp01.nxt.blackbaud.com"},e}();n.BBAuthGetDomain=i},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.addCss=function(e){var n=document.createElement("style");return n.appendChild(document.createTextNode(e)),document.head.appendChild(n),n},e.addIframe=function(e,n,t){var o=document.createElement("iframe");return o.className=n,o.title=t,o.src=e,this.addElToBodyTop(o),o},e.removeCss=function(e){this.removeEl(e,document.head)},e.removeEl=function(e,n){void 0===n&&(n=document.body),n.contains(e)&&n.removeChild(e)},e.addElToBodyTop=function(e){var n=document.body;n.firstChild?n.insertBefore(e,n.firstChild):n.appendChild(e)},e}();n.BBAuthDomUtility=o},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o="https://host.nxt.blackbaud.com";function i(e,n){if(e.origin===o){var t=e.data;return!!t&&t.source===n}return!1}var r=function(){function e(){}return e.postOmnibarMessage=function(e,n,t){n.source="auth-client",e.contentWindow.postMessage(n,t||o)},e.messageIsFromOmnibar=function(e){return i(e,"skyux-spa-omnibar")},e.messageIsFromToastContainer=function(e){return i(e,"skyux-spa-omnibar-toast-container")},e}();n.BBAuthInterop=r},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t(0),i=t(2),r=t(1),a=i.BBAuthGetDomain.getSTSDomain()+"/session/csrf";function s(e,n,t,o){return(o||void 0===o&&t)&&((e=e||{})[n]=t),e}function c(e,n,t,i,r){var a;return a=s(a,"environment_id",t),a=s(a,"legal_entity_id",r),a=s(a,"permission_scope",i,!(!t&&!r||!i)),new Promise((function(t,i){!function(e,n,t,i,r){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4===a.readyState)switch(a.status){case 0:r({code:o.BBAuthTokenErrorCode.Offline,message:"The user is offline."});break;case 200:i(a.responseText);break;case 401:r({code:o.BBAuthTokenErrorCode.NotLoggedIn,message:"The user is not logged in."});break;case 403:r({code:o.BBAuthTokenErrorCode.InvalidEnvironment,message:"The user is not a member of the specified environment."});break;default:a.status>=400&&r({code:o.BBAuthTokenErrorCode.Unspecified,message:"An unknown error occurred."})}},a.open("POST",e,!0),a.setRequestHeader(n.name,n.value),a.setRequestHeader("Accept","application/json"),a.setRequestHeader("Content-Type","application/json"),a.withCredentials=!0,t?a.send(JSON.stringify(t)):a.send()}(e,{name:"X-CSRF",value:n},a,(function(e){var n=e?JSON.parse(e):void 0;t(n)}),i)}))}var u=function(){function e(){}return e.request=function(e,n,t,i,s,u,d){return!s||i||u?new Promise((function(l,f){new Promise((function(e,n){d?e({csrf_token:"token_needed"}):c(a,"token_needed").then(e).catch(n)})).then((function(n){return c(e,n.csrf_token,i,s,u)})).then(l).catch((function(e){if(t||e.code===o.BBAuthTokenErrorCode.Offline)f(e);else switch(e.code){case o.BBAuthTokenErrorCode.NotLoggedIn:r.BBAuthNavigator.redirectToSignin(n);break;default:r.BBAuthNavigator.redirectToError(e.code)}}))})):Promise.reject({code:o.BBAuthTokenErrorCode.PermissionScopeNoEnvironment,message:"You must also specify an environment or legal entity when specifying a permission scope."})},e.requestWithToken=function(e,n){return new Promise((function(t,o){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4===i.readyState)switch(i.status){case 200:t(JSON.parse(i.responseText));break;default:o()}},i.open("GET",e,!0),i.setRequestHeader("Authorization","Bearer "+n),i.setRequestHeader("Accept","application/json"),i.send()}))},e}();n.BBCsrfXhr=u},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t(10),i=/1bb:\/\/([a-z]{3})-([a-z0-9]{5})(-[a-z]{4}[0-9]{2})?\/(.*)/;var r=function(){function e(){}return e.getUrl=function(e,n){var t=i.exec(e),o=e,r=n?n.zone:void 0;return r&&(r=r.replace("-","")),t&&(t[3]&&(r=t[3].substring(1)),o="https://"+t[1]+"-"+r+".app.blackbaud.net/"+t[2]+"/"+t[4]),Promise.resolve(o)},e.getToken=function(n){return e.getTokenInternal(n)},e.clearTokenCache=function(){e.tokenCache={}},e.getTokenInternal=function(n){var t=(n=n||{}).forceNewToken,i=n.disableRedirect;if(e.mock)return Promise.resolve("mock_access_token_auth-client@blackbaud.com");var r=function(e){var n=e.envId,t=e.permissionScope;return"token|"+(e.leId||"-")+"|"+(n||"-")+"|"+(t||"-")}(n),a=e.tokenCache[r]=e.tokenCache[r]||{},s=(new Date).valueOf();return!t&&a.lastToken&&a.expirationTime&&a.expirationTime-s>6e4?Promise.resolve(a.lastToken):(a.pendingLookupPromise||(a.pendingLookupPromise=o.BBAuthTokenIntegration.getToken(i,n.envId,n.permissionScope,n.leId).then((function(e){return a.expirationTime=(new Date).valueOf()+1e3*e.expires_in,a.lastToken=e.access_token,a.pendingLookupPromise=null,a.lastToken})).catch((function(e){throw a.pendingLookupPromise=null,e}))),a.pendingLookupPromise)},e.mock=!1,e.tokenCache={},e}();n.BBAuth=r},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(e){e[e.Unspecified=0]="Unspecified",e[e.NotLoggedIn=1]="NotLoggedIn",e[e.InvalidEnvironment=2]="InvalidEnvironment",e[e.PermissionScopeNoEnvironment=3]="PermissionScopeNoEnvironment",e[e.Offline=4]="Offline"}(n.BBAuthTokenErrorCode||(n.BBAuthTokenErrorCode={}))},function(e,n,t){"use strict";function o(e){for(var n=[],t=0,o=e.split(".");t<o.length;t++){var i=o[t],r=parseInt(i,10)||0;n.push(r)}return n}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){}return e.registerScript=function(e){return new Promise((function(n,t){var o=document.createElement("script");o.onload=n,o.onerror=t,o.src=e,document.body.appendChild(o)}))},e.smartRegisterScript=function(n,t,i){return i&&function(e,n){for(var t=o(e),i=o(n),r=0;r<t.length;r++)if(r<i.length){if(i[r]>t[r])return!0;if(i[r]<t[r])return!1}return!0}(t,i)?Promise.resolve():e.registerScript(n)},e}();n.BBOmnibarScriptLoader=i},function(e,n,t){"use strict";function o(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0}),o(t(0)),o(t(12)),o(t(14))},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t(5),i=t(11),r=t(2),a=function(){function e(){}return e.getToken=function(e,n,t,a){return this.hostNameEndsWith("blackbaud.com")?o.BBCsrfXhr.request(r.BBAuthGetDomain.getSTSDomain()+"/oauth2/token",void 0,e,n,t,a,!0):i.BBAuthCrossDomainIframe.getToken({disableRedirect:e,envId:n,leId:a,permissionScope:t})},e.hostNameEndsWith=function(e){return this.getLocationHostname().substr(-e.length)===e},e.getLocationHostname=function(){return window.location.hostname},e}();n.BBAuthTokenIntegration=a},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t(3),i=t(1),r=t(7),a=function(){function e(){}return e.reset=function(){var e=this;this.requestCounter=0,this.tokenRequests={},this.iframeReadyPromise=new Promise((function(n){return e.iframeReadyResolve=n})),this.listenerSetup=!1},e.TARGET_ORIGIN=function(){return this.TARGETORIGIN},e.getOrMakeIframe=function(){return e.iframeEl=document.getElementById("auth-cross-domain-iframe"),e.iframeEl||(e.iframeEl=o.BBAuthDomUtility.addIframe("https://s21aidntoken00blkbapp01.nxt.blackbaud.com/Iframes/CrossDomainAuthFrame.html","auth-cross-domain-iframe",""),e.iframeEl.id="auth-cross-domain-iframe",e.iframeEl.hidden=!0),e.iframeEl},e.getToken=function(e){return this.setupListenersForIframe(),this.getTokenFromIframe(this.getOrMakeIframe(),e)},e.setupListenersForIframe=function(){var e=this;this.listenerSetup||(window.addEventListener("message",(function(n){var t=n.data,o=t.requestId,i=e.tokenRequests[o];if("security-token-svc"===t.source||t.origin===e.TARGET_ORIGIN())switch(t.messageType){case"ready":e.iframeReadyResolve(!0);break;case"error":e.handleErrorMessage(t.value,i.reject,i.args.disableRedirect);break;case"getToken":var r={access_token:t.value,expires_in:0};i.resolve(r)}})),this.listenerSetup=!0)},e.getTokenFromIframe=function(n,t){var o=this;return new Promise((function(i,r){var a=o.requestCounter++;e.tokenRequests[a]={args:t,reject:r,resolve:i},e.iframeReadyPromise.then((function(){n.contentWindow.postMessage({messageType:"getToken",requestId:a,source:"auth-client",value:t},e.TARGET_ORIGIN())}))}))},e.handleErrorMessage=function(e,n,t){if(t)n(e);else switch(e.code){case r.BBAuthTokenErrorCode.Offline:n(e);break;case r.BBAuthTokenErrorCode.NotLoggedIn:i.BBAuthNavigator.redirectToSignin(void 0);break;default:i.BBAuthNavigator.redirectToError(e.code)}},e.listenerSetup=!1,e.iframeReadyPromise=new Promise((function(n){return e.iframeReadyResolve=n})),e.tokenRequests={},e.requestCounter=0,e.TARGETORIGIN="https://s21aidntoken00blkbapp01.nxt.blackbaud.com",e}();n.BBAuthCrossDomainIframe=a},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}(t(13))},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t(0),i=t(4),r=t(5),a=t(3),s=t(1);function c(e,n,t,r){var s,c,u;function l(){a.BBAuthDomUtility.removeEl(c),a.BBAuthDomUtility.removeCss(s),c=s=void 0,window.removeEventListener("message",f)}function f(a){if(i.BBAuthInterop.messageIsFromOmnibar(a)){var s,u,d=a.data;switch(d.messageType){case"ready":i.BBAuthInterop.postOmnibarMessage(c,{messageType:"host-ready"}),i.BBAuthInterop.postOmnibarMessage(c,{contextDestinations:n,messageType:"context-provide"});break;case"get-token":s=d.tokenRequestId,u=d.disableRedirect,o.BBAuth.getToken({disableRedirect:u}).then((function(e){i.BBAuthInterop.postOmnibarMessage(c,{messageType:"token",token:e,tokenRequestId:s})}),(function(e){i.BBAuthInterop.postOmnibarMessage(c,{messageType:"token-fail",reason:e,tokenRequestId:s})}));break;case"welcome-cancel":l(),r({reason:"canceled"});break;case"welcome-environment-selected":l(),setTimeout((function(){e.envId=d.envId,t(e)}),10)}}}s=a.BBAuthDomUtility.addCss("\n.sky-omnibar-welcome-iframe {\n  background-color: #fff;\n  border: none;\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  z-index: 10000;\n}\n"),u=d.url+"?hosted=1&svcid="+encodeURIComponent(e.svcId)+"&url="+encodeURIComponent(e.url),c=a.BBAuthDomUtility.addIframe(u,"sky-omnibar-welcome-iframe","Welcome"),window.addEventListener("message",f)}function u(){s.BBAuthNavigator.redirectToError(o.BBAuthTokenErrorCode.InvalidEnvironment)}var d=function(){function e(){}return e.ensureContext=function(e){var n=e.envId,t=e.envIdRequired,i=e.leId,a=e.leIdRequired,s=e.svcId;return!n&&t||!i&&a?new Promise((function(n,t){s?o.BBAuth.getToken().then((function(o){var i="https://s21anavnavaf00blkbapp01.sky.blackbaud.com/user/destinations?svcid="+encodeURIComponent(s);e.url&&(i+="&referringurl="+encodeURIComponent(e.url)),r.BBCsrfXhr.requestWithToken(i,o).then((function(o){var i=o&&o.items,r=i&&i.length;1===r?(e.url=i[0].url,n(e)):r>1?c(e,o,n,t):u()}))})):u()})):Promise.resolve(e)},e.url="https://host.nxt.blackbaud.com/omnibar/welcome",e}();n.BBContextProvider=d},function(e,n,t){"use strict";function o(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0}),o(t(15)),o(t(26)),o(t(27))},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i,r,a,s,c,u,d,l,f,m,p=t(16),h=t(0),v=t(4),b=t(1),B=t(3),g=t(19),y=t(23),k=t(24),I=t(25),T="sky-omnibar-iframe-expanded",w="sky-omnibar-loading";function A(){a=B.BBAuthDomUtility.addIframe(s.url||"https://host.nxt.blackbaud.com/omnibar/","sky-omnibar-iframe "+w,"Navigation")}function O(){var e=document.location.href;v.BBAuthInterop.postOmnibarMessage(a,{href:e,messageType:"location-change"}),I.BBOmnibarToastContainer.updateUrl(e)}function E(){v.BBAuthInterop.postOmnibarMessage(a,{messageType:"push-notifications-open"})}function _(){d||(d=!0,h.BBAuth.getToken({disableRedirect:!0,envId:s.envId,leId:s.leId,permissionScope:"Notifications"}).then((function(e){!function(e){var n=p(e)["1bb.entitlements"];return!!n&&(n=Array.isArray(n)?n:[n]).indexOf("notif")>-1}(e)?d=!1:I.BBOmnibarToastContainer.init({envId:s.envId,leId:s.leId,navigateCallback:P,navigateUrlCallback:x,openMenuCallback:E,svcId:s.svcId,url:document.location.href}).then((function(){k.BBOmnibarPushNotifications.connect(s.leId,s.envId,(function(e){v.BBAuthInterop.postOmnibarMessage(a,{messageType:"push-notifications-update",pushNotifications:e}),I.BBOmnibarToastContainer.showNewNotifications(e),l=e&&e.notifications&&e.notifications.filter((function(e){return!e.isRead})).length,U()}))}))})).catch((function(){d=!1})))}function C(){function e(e){v.BBAuthInterop.postOmnibarMessage(a,{messageType:"refresh-user",token:e}),e?_():d&&(I.BBOmnibarToastContainer.destroy(),k.BBOmnibarPushNotifications.disconnect(),d=!1)}h.BBAuth.clearTokenCache(),h.BBAuth.getToken({disableRedirect:!0,forceNewToken:!0}).then(e).catch((function(){return e(void 0)}))}function N(){y.BBOmnibarUserActivityPrompt.show({sessionRenewCallback:function(){g.BBOmnibarUserActivity.userRenewedSession()}})}function R(){y.BBOmnibarUserActivityPrompt.hide()}function S(){g.BBOmnibarUserActivity.startTracking(C,N,R,s.allowAnonymous,c)}function P(e){var n=s.nav;n&&n.beforeNavCallback&&!1===n.beforeNavCallback(e)||b.BBAuthNavigator.navigate(e.url)}function x(e){b.BBAuthNavigator.navigate(e)}function M(e){if(v.BBAuthInterop.messageIsFromOmnibar(e)){var n,t,r,d,l,m,p,b,B,y,I,A=e.data,E=s.nav;switch(A.messageType){case"ready":v.BBAuthInterop.postOmnibarMessage(a,{messageType:"host-ready"}),y=history.pushState,I=history.replaceState,history.pushState=function(){var e=y.apply(history,arguments);return O(),e},history.replaceState=function(){var e=I.apply(history,arguments);return O(),e},v.BBAuthInterop.postOmnibarMessage(a,{compactNavOnly:s.compactNavOnly,enableHelp:s.enableHelp,envId:s.envId,hideResourceLinks:s.hideResourceLinks,leId:s.leId,localNavItems:E&&E.localNavItems,localNotifications:!!s.notifications,localSearch:!!s.onSearch,messageType:"nav-ready",navVersion:s.navVersion,services:E&&E.services,svcId:s.svcId,theme:s.theme}),(B=s.notifications)&&B.onReady({updateNotifications:function(e){v.BBAuthInterop.postOmnibarMessage(a,{messageType:"notifications-update",notifications:e})}}),_(),O(),u();break;case"display-ready":i.classList.remove(w),a.classList.remove(w);break;case"expand":a.classList.add(T);break;case"collapse":a.classList.remove(T);break;case"navigate-url":x(A.url);break;case"navigate":P(A.navItem);break;case"search":b=A.searchArgs,s.onSearch&&s.onSearch(b).then((function(e){v.BBAuthInterop.postOmnibarMessage(a,{messageType:"search-results",results:e})}));break;case"get-token":m=A.tokenRequestId,p=A.disableRedirect,h.BBAuth.getToken({disableRedirect:p}).then((function(e){S(),v.BBAuthInterop.postOmnibarMessage(a,{messageType:"token",token:e,tokenRequestId:m})}),(function(e){S(),v.BBAuthInterop.postOmnibarMessage(a,{messageType:"token-fail",reason:e,tokenRequestId:m})}));break;case"help-open":(l=window.BBHELP)&&l.HelpWidget.open();break;case"notification-read":!function(e){var n=s.notifications;n&&n.onNotificationRead&&n.onNotificationRead(e)}(A.notification);break;case"push-notifications-change":d=A.notifications,k.BBOmnibarPushNotifications.updateNotifications(d);break;case"session-renew":g.BBOmnibarUserActivity.userRenewedSession();break;case"environment-update":n=A.name,t="sky-omnibar-environment-visible",r=document.body.classList,n=n||"",o.innerText=n,n?r.add(t):r.remove(t);break;case"legacy-keep-alive-url-change":c=A.url,S();break;case"selected-service-update":f=A.serviceName,U()}}}function U(){if(m){var e=m.slice();f&&e.push(f);var n=e.join(" - ");l&&(n="("+l+") "+n),document.title=n}}var L=function(){function e(){}return e.load=function(e){return s=s=e,c=s.legacyKeepAliveUrl,new Promise((function(e){u=e,function(){var e="background: linear-gradient(to right, #71bf44 0, #31b986 50%, #00b2ec 100%);",n="#4d5259",t=s.theme;if(t){var o=t.accent;n=t.backgroundColor||n,!1===o?e="display: none;":o&&o.color&&(e="background-color: "+o.color+";")}r=B.BBAuthDomUtility.addCss("\nbody {\n  margin-top: 50px;\n}\n\n#bb-help-container {\n  padding-top: 1px;\n}\n\n.sky-omnibar-iframe,\n.sky-omnibar-placeholder {\n  border: none;\n  height: 50px;\n  width: 100%;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  z-index: 1000;\n}\n\n.sky-omnibar-placeholder {\n  background-color: "+n+";\n  display: none;\n}\n\n.sky-omnibar-placeholder-accent {\n  height: 5px;\n  "+e+"\n}\n\n.sky-omnibar-placeholder."+w+" {\n  display: block;\n}\n\n.sky-omnibar-iframe."+w+" {\n  visibility: hidden;\n}\n\n."+T+' {\n  height: 100%;\n}\n\n.sky-omnibar-environment {\n  background-color: #e1e1e3;\n  color: #282b31;\n  font-family: "Blackbaud Sans", "Open Sans", "Helvetica Neue", Arial, sans-serif;\n  font-size: 12px;\n  font-weight: 400;\n  height: 0;\n  line-height: 24px;\n  overflow: hidden;\n  padding: 0 15px;\n  text-align: right;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.sky-omnibar-environment-visible .sky-omnibar-environment {\n  height: 24px;\n}\n')}(),(i=document.createElement("div")).className="sky-omnibar-placeholder "+w,i.innerHTML='<div class="sky-omnibar-placeholder-accent"></div>',document.body.appendChild(i),(o=document.createElement("div")).className="sky-omnibar-environment",B.BBAuthDomUtility.addElToBodyTop(o),A(),window.addEventListener("message",M)}))},e.update=function(e){v.BBAuthInterop.postOmnibarMessage(a,{messageType:"update",updateArgs:e})},e.setTitle=function(e){m=e&&e.titleParts,U()},e.destroy=function(){I.BBOmnibarToastContainer.destroy(),k.BBOmnibarPushNotifications.disconnect(),B.BBAuthDomUtility.removeEl(i),B.BBAuthDomUtility.removeEl(a),B.BBAuthDomUtility.removeEl(o),B.BBAuthDomUtility.removeCss(r),window.removeEventListener("message",M),s=r=i=a=o=u=d=l=m=f=void 0},e}();n.BBOmnibar=L},function(e,n,t){"use strict";var o=t(17);function i(e){this.message=e}i.prototype=new Error,i.prototype.name="InvalidTokenError",e.exports=function(e,n){if("string"!=typeof e)throw new i("Invalid token specified");var t=!0===(n=n||{}).header?0:1;try{return JSON.parse(o(e.split(".")[t]))}catch(e){throw new i("Invalid token specified: "+e.message)}},e.exports.InvalidTokenError=i},function(e,n,t){var o=t(18);e.exports=function(e){var n=e.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(o(e).replace(/(.)/g,(function(e,n){var t=n.charCodeAt(0).toString(16).toUpperCase();return t.length<2&&(t="0"+t),"%"+t})))}(n)}catch(e){return o(n)}}},function(e,n){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function o(e){this.message=e}o.prototype=new Error,o.prototype.name="InvalidCharacterError",e.exports="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var n=String(e).replace(/=+$/,"");if(n.length%4==1)throw new o("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,r,a=0,s=0,c="";r=n.charAt(s++);~r&&(i=a%4?64*i+r:r,a++%4)?c+=String.fromCharCode(255&i>>(-2*a&6)):0)r=t.indexOf(r);return c}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i,r,a,s,c,u,d,l,f,m,p,h,v,b=t(20),B=t(21),g=t(22),y=t(5),k=t(2),I=t(1),T="";function w(){d=Date.now()}function A(e){e.clientX===i&&e.clientY===r||(i=e.clientX,r=e.clientY,w())}function O(){var e=Date.now();(!l||e-l>R.MIN_RENEWAL_RETRY)&&(l=e,y.BBCsrfXhr.request(k.BBAuthGetDomain.getSTSDomain()+"/session/renew",{inactivity:1}).catch((function(){})))}function E(){u=!0,c()}function _(){u=!1,w(),a()}function C(){v?I.BBAuthNavigator.navigate(v):I.BBAuthNavigator.redirectToSignoutForInactivity()}function N(){m||O(),f=setInterval((function(){B.BBOmnibarUserSessionExpiration.getSessionExpiration(T,h,m).then((function(e){o&&b.BBOmnibarUserActivityProcessor.process({allowAnonymous:m,closeInactivityPrompt:_,expirationDate:e,inactivityPromptDuration:R.INACTIVITY_PROMPT_DURATION,isShowingInactivityPrompt:u,lastActivity:d,maxSessionAge:R.MAX_SESSION_AGE,minRenewalAge:R.MIN_RENEWAL_AGE,redirectForInactivity:C,renewSession:O,showInactivityPrompt:E})}))}),R.ACTIVITY_TIMER_INTERVAL)}var R=function(){function e(){}return e.startTracking=function(n,t,i,r,u){o&&r===m&&u===p||(e.stopTracking(),s=n,c=t,a=i,m=r,p=u,document.addEventListener("keypress",w),document.addEventListener("mousemove",A),N(),g.BBOmnibarUserSessionWatcher.start(r,u,s,(function(e){h=e.legacyTtl,T=e.refreshId,v=e.legacySigninUrl})),o=!0)},e.userRenewedSession=function(){_(),O()},e.stopTracking=function(){g.BBOmnibarUserSessionWatcher.stop(),B.BBOmnibarUserSessionExpiration.reset(),document.removeEventListener("keypress",w),document.removeEventListener("mousemove",A),f&&(clearInterval(f),f=void 0),o=i=r=d=l=u=s=c=a=m=p=void 0},e.ACTIVITY_TIMER_INTERVAL=1e3,e.MIN_RENEWAL_RETRY=6e4,e.INACTIVITY_PROMPT_DURATION=12e4,e.MIN_RENEWAL_AGE=3e5,e.MAX_SESSION_AGE=54e5,e}();n.BBOmnibarUserActivity=R},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.process=function(e){var n=e.allowAnonymous,t=e.closeInactivityPrompt,o=e.expirationDate,i=e.inactivityPromptDuration,r=e.isShowingInactivityPrompt,a=e.lastActivity,s=e.maxSessionAge,c=e.minRenewalAge,u=e.redirectForInactivity,d=e.renewSession,l=e.showInactivityPrompt,f=Date.now();if(null!==o){!n&&f>o&&u();var m=o-i,p=o-s+c;r?f<m&&t():a>p?d():!n&&f>m&&l()}},e}();n.BBOmnibarUserActivityProcessor=o},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i=t(2),r=t(5);var a=function(){function e(){}return e.getSessionExpiration=function(e,n,t){var a=function(e,n){if(o&&o.refreshId===e&&o.allowAnonymous===n)return o.promise;var t=new Promise((function(e,t){r.BBCsrfXhr.request(i.BBAuthGetDomain.getSTSDomain()+"/session/ttl",void 0,n).then((function(n){var t=null===n?null:Date.now()+1e3*n;e(t)}),(function(){e(null)}))}));return o={allowAnonymous:n,promise:t,refreshId:e},t}(e,t);return new Promise((function(e,t){a.then((function(t){var o;if(null===t)o=null;else if("number"==typeof n){var i=Date.now()+n;o=Math.min(t,i)}else o=t;e(o)}))}))},e.reset=function(){o=void 0},e}();n.BBOmnibarUserSessionExpiration=a},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i,r,a,s,c,u,d,l=t(4),f=t(1),m=t(2),p={};function h(e){if(e){var n=e.split("://");return n[0]+"://"+n[1].split("/")[0]}}function v(e,n){var t=document.createElement("iframe");return t.className=e,t.width="0",t.height="0",t.frameBorder="0",t.src=n,t.tabIndex=-1,t.setAttribute("aria-hidden","true"),document.body.appendChild(t),t}function b(){var e=y.IDENTITY_SECURITY_TOKEN_SERVICE_ORIGIN+"/SessionWatcher.html?origin="+encodeURIComponent(location.origin);c=v("sky-omnibar-iframe-session-watcher",e)}function B(e){if("string"==typeof e.data){var n=void 0;try{n=JSON.parse(e.data)}catch(e){return}if("session_change"===n.messageType){var t=n.message,o=t&&t.sessionId,c=t&&t.refreshId;o||s||(d?f.BBAuthNavigator.navigate(d):f.BBAuthNavigator.redirectToSignin()),void 0!==p.refreshId&&c!==p.refreshId&&function(e){u&&l.BBAuthInterop.postOmnibarMessage(u,e,h(i))}({messageType:"session-refresh"}),void 0!==p.sessionId&&o!==p.sessionId&&r(),p.refreshId=c,p.sessionId=o,a(p)}}}function g(e){switch(e.origin){case y.IDENTITY_SECURITY_TOKEN_SERVICE_ORIGIN:B(e);break;case h(i):!function(e){var n=e.data;switch(n.messageType){case"ready":p.legacyTtl=n.ttl,d=n.signinUrl,a(p)}}(e)}}var y=function(){function e(){}return e.start=function(n,t,c,d){o&&n===s&&t===i||(e.stop(),s=n,r=c,i=t,a=d,b(),i&&(u=v("sky-omnibar-iframe-legacy-keep-alive",i)),window.addEventListener("message",g,!1),o=!0)},e.stop=function(){window.removeEventListener("message",g,!1),c&&(document.body.removeChild(c),c=void 0),u&&(document.body.removeChild(u),u=void 0),p={},o=s=r=i=d=a=void 0},e.IDENTITY_SECURITY_TOKEN_SERVICE_ORIGIN=m.BBAuthGetDomain.getSTSDomain(),e}();n.BBOmnibarUserSessionWatcher=y},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i,r,a=t(3),s=t(4);function c(e){if(s.BBAuthInterop.messageIsFromOmnibar(e))switch(e.data.messageType){case"ready":s.BBAuthInterop.postOmnibarMessage(i,{messageType:"host-ready"}),i.classList.add("sky-omnibar-inactivity-iframe-ready");break;case"session-renew":r()}}var u=function(){function e(){}return e.show=function(n){var t;this.hide(),r=n.sessionRenewCallback,o=a.BBAuthDomUtility.addCss("\n  .sky-omnibar-inactivity-iframe {\n    background-color: transparent;\n    border: none;\n    position: fixed;\n    top: 0;\n    left: 0;\n    height: 100%;\n    width: 100%;\n    z-index: 100000;\n    visibility: hidden;\n  }\n\n  .sky-omnibar-inactivity-iframe-ready {\n    visibility: visible;\n  }\n  "),t=e.url,i=a.BBAuthDomUtility.addIframe(t,"sky-omnibar-inactivity-iframe","Inactivity Prompt"),window.addEventListener("message",c)},e.hide=function(){i&&(a.BBAuthDomUtility.removeEl(i),a.BBAuthDomUtility.removeCss(o),i=o=r=void 0,window.removeEventListener("message",c))},e.url="https://host.nxt.blackbaud.com/omnibar/inactivity",e}();n.BBOmnibarUserActivityPrompt=u},function(e,n,t){"use strict";var o=this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){e.done?i(e.value):new t((function(n){n(e.value)})).then(a,s)}c((o=o.apply(e,n||[])).next())}))},i=this&&this.__generator||function(e,n){var t,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=n.call(e,a)}catch(e){r=[6,e],o=0}finally{t=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(n,"__esModule",{value:!0});var r,a=t(0),s=t(8),c=function(){function e(){}return e.connect=function(e,n,t){return o(this,void 0,void 0,(function(){return i(this,(function(o){return r||(r=window.BBNotificationsClient?Promise.resolve():s.BBOmnibarScriptLoader.registerScript(this.NOTIFICATIONS_CLIENT_URL)),[2,r.then((function(){BBNotificationsClient.BBNotifications.init({tokenCallback:function(){return a.BBAuth.getToken({disableRedirect:!0,envId:n,leId:e})}}),BBNotificationsClient.BBNotifications.addListener(t)}))]}))}))},e.disconnect=function(){return o(this,void 0,void 0,(function(){return i(this,(function(e){return r?[2,r.then((function(){BBNotificationsClient.BBNotifications.destroy(),r=void 0}))]:[2,Promise.resolve()]}))}))},e.updateNotifications=function(e){BBNotificationsClient.BBNotifications.updateNotifications(e)},e.NOTIFICATIONS_CLIENT_URL="https://sky.blackbaudcdn.net/static/notifications-client/1/notifications-client.global.min.js",e}();n.BBOmnibarPushNotifications=c},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i,r,a,s,c,u=t(6),d=t(3),l=t(4),f="sky-omnibar-toast-container",m=f+"-ready",p=f+"-empty",h=20;function v(){return i||(o=d.BBAuthDomUtility.addCss("\n."+f+" {\n  border: none;\n  display: none;\n  position: fixed;\n  right: 0px;\n  height: 0px;\n  width: 300px;\n  /* z-index is 1 less than omnibar so menus will display over top the toast container */\n  z-index: 999;\n}\n\n."+m+" {\n  display: block;\n}\n\n."+p+" {\n  visibility: hidden;\n}\n"),(i=document.createElement("iframe")).src=y.CONTAINER_URL,i.className=f+" "+p,i.title="Toast container",document.body.appendChild(i),window.addEventListener("message",g)),i}function b(e){var n=document.querySelector(e);return n?n.getBoundingClientRect().height:0}function B(){i&&l.BBAuthInterop.postOmnibarMessage(i,{href:c,messageType:"location-change"})}function g(e){if(l.BBAuthInterop.messageIsFromToastContainer(e)){var n,t,o=e.data;switch(o.messageType){case"toast-ready":l.BBAuthInterop.postOmnibarMessage(i,{messageType:"host-ready"}),l.BBAuthInterop.postOmnibarMessage(i,{envId:s.envId,leId:s.leId,messageType:"nav-ready",svcId:s.svcId}),B(),i.classList.add(m),a();break;case"get-token":n=o.tokenRequestId,t=o.disableRedirect,u.BBAuth.getToken({disableRedirect:t}).then((function(e){l.BBAuthInterop.postOmnibarMessage(i,{messageType:"token",token:e,tokenRequestId:n})}),(function(e){l.BBAuthInterop.postOmnibarMessage(i,{messageType:"token-fail",reason:e,tokenRequestId:n})}));break;case"navigate-url":s.navigateUrlCallback(o.url);break;case"navigate":s.navigateCallback(o.navItem);break;case"toast-container-change":o.height>0?(i.style.height=o.height+"px",i.style.top=b(".sky-omnibar-iframe")+b(".sky-omnibar-environment")+h+"px",i.classList.remove(p)):i.classList.add(p);break;case"push-notifications-open":s.openMenuCallback()}}}var y=function(){function e(){}return e.init=function(e){return s=e,c=e.url,r||(r=new Promise((function(e){a=e,v()}))),r},e.showNewNotifications=function(e){l.BBAuthInterop.postOmnibarMessage(i,{messageType:"push-notifications-update",pushNotifications:e})},e.updateUrl=function(e){c=e,B()},e.destroy=function(){o&&d.BBAuthDomUtility.removeCss(o),i&&d.BBAuthDomUtility.removeEl(i),c=i=s=r=a=o=void 0,window.removeEventListener("message",g)},e.CONTAINER_URL="https://host.nxt.blackbaud.com/omnibar/toast",e}();n.BBOmnibarToastContainer=y},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t(8);function i(){return window.jQuery}var r=function(){function e(){}return e.load=function(e){return new Promise((function(n){var t=i(),r=t&&t.fn&&t.fn.jquery;o.BBOmnibarScriptLoader.smartRegisterScript("https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.0/jquery.js","2.1.0",r).then((function(){return o.BBOmnibarScriptLoader.registerScript("https://cdnjs.cloudflare.com/ajax/libs/easyXDM/2.4.17.1/easyXDM.min.js")})).then((function(){return o.BBOmnibarScriptLoader.registerScript("https://signin.blackbaud.com/Omnibar.min.js")})).then((function(){document.body.classList.add("bb-omnibar-height-padding");var t=document.createElement("div");t.setAttribute("data-omnibar-el",""),document.body.appendChild(t),(e=e||{})["z-index"]=1e3,e.afterLoad=n,e.menuEl&&(e.menuEl=i()(e.menuEl)),BBAUTH.Omnibar.load(t,e)}))}))},e}();n.BBOmnibarLegacy=r},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0})}])}));